好的，我将根据视频内容，提供一个更加详细的、按时间线整理的文档格式摘要。

# 【GDC24】技术和叙事的碰撞：《赛博朋克2077》的任务编辑器：深度整理

## 1. 演讲介绍与背景 (00:00:07 - 00:02:10)

* **开场与主题 (00:00:07 - 00:00:24):** 演讲标题为“技术与叙事的碰撞：《赛博朋克》任务编辑器”，副标题是“赛博朋克的叙事工具：好的、坏的和令人WTF的”。
* **会前提醒 (00:00:26 - 00:01:28):**
    * 内容将在 GDC 结束后上传，请勿录像。
    * 涉及《巫师3》、《赛博朋克2077》及其资料片《往日之影》的剧透。
* **演讲目标：**
    1.  展示叙事工具背后的设计原则。
    2.  说明这些原则如何在 REDengine 中体现。
    3.  展示团队如何使用这些工具制作《赛博朋克》的任务。
* **讲者与团队 (00:01:28 - 00:02:10):**
    * 讲者 Sarah，CD Projekt Red 的代理任务设计师，现致力于 Project Orion（下一部《赛博朋克》作品）。
    * 叙事工具由一个由大约 15 名程序员组成的团队开发。

## 2. 核心叙事工具深度解析 (00:02:51 - 00:10:04)

CD Projekt Red 主要使用三个相互关联的工具来构建叙事内容：任务编辑器、场景编辑器和日志编辑器。

### 2.1. 任务编辑器 (Quest Editor) (00:03:00 - 00:06:33)
![alt text](image.png)
* **功能定位：** 核心逻辑结构，包含整个游戏的逻辑流程，从单个任务到整体叙事结构。
* **实现方式：** 可视化脚本工具（Visual Scripting Tool），用于定义游戏应该做什么，以及它对玩家行为的反应。
* **核心节点类型：**
![alt text](image-1.png)
    * **逻辑功能节点：**
        * **暂停节点 (Pause Nodes)：** 等待特定条件被满足或触发后才继续执行。
        * **条件节点 (Condition Nodes)：** 检查某个条件（如玩家是否有某物品，某个任务是否完成）并返回真/假。
        * **截止控制节点 (Cutoff Control Nodes)：** 用于终止执行流程，例如取消正在运行的命令。
        * **流程控制节点 (Flow Control Nodes)：** 控制执行流的路径，例如 AND（都满足）、OR（满足其一）、XOR（仅满足其一）。
    * **执行功能节点 (Execution Nodes)：** 向各种游戏系统发送命令。
        * **角色控制：** 控制玩家角色（如给予物品、施加状态效果）和 NPC 行为。
        * **世界交互：** 控制设备和互动对象。
        * **UI/核心系统：** 管理任务日志、警告信息、天气、淡入淡出效果以及限制玩家行为（如禁用跳跃或快速移动）。
* **节点分类原因：**
     **职责分离 (Separation of Concerns)：** 这是最根本的原因。将任务的“思考”（逻辑功能节点）和“行动”（执行功能节点）分开，能使任务图表更清晰、更易于管理。
     **流程清晰与可读性 (Clarity and Readability)：** 使设计师可以快速识别一个节点是用于**控制流程走向**（逻辑节点）还是用于**对游戏世界造成实际影响**（执行节点），从而提升复杂任务图表的阅读和维护效率。
     **可复用性与标准化 (Reusability and Standardization)：** 逻辑节点（如 AND/OR）通常是通用的，可以在任何地方复用。执行节点连接特定的底层系统，职责分离使得这些**底层系统**的维护和更新更容易，而不会影响逻辑控制的稳定性。
     **强大的复杂性处理能力 (Handling Complexity)：** 这种划分使得任务设计师可以专注于构建复杂的决策树（逻辑功能），然后再挂接上对应的行动指令（执行功能），有效管理了《赛博朋克 2077》这类任务流程巨大的复杂性。

### 2.2. 场景编辑器 (Scene Editor) (00:06:37 - 00:09:27)
![alt text](image-2.png)
* **功能定位：** 设置游戏中的对话、过场动画和场景互动。
* **组件结构：**
    * **图表 (Graph)：** 包含“选择”和“片段”节点，定义对话分支和结构。
    * **剧本面板 (Script Panel)：** 显示对话文本。
    * **时间线 (Timeline)：** 精细控制事件时机，包括对话、动画姿势、目光注视、面部表情、音效和特效事件。
    * **视口 (Viewport) 和场景点 (Scene Spots)：** 视口显示场景在世界中的位置，场景点用于放置和设置角色动画的位置。
* **工作流：** 允许在编辑器中直接预览和播放特定片段。

### 2.3. 日志编辑器 (Journal Editor) (00:09:29 - 00:10:04)

* **功能定位：** 管理所有与叙事内容相关的只读数据（称为“on screens”）。
* **内容包括：** 任务目标条目、人物资料库条目、邮件、网站内容、芯片文本等。

## 3. 叙事工具的设计原则与理念 (00:10:07 - 00:36:20)

### 3.1. 总体目标与核心痛点 (00:10:07 - 00:11:32)

* **总体原则：** 集中化、标准化、易于访问。
* **核心目标：** 确保设计师能够实现所有想法，不被工具限制。**痛点借鉴：** 《巫师3》开发后期，设计师经常受限于工具，不得不依赖程序员来实现想法。

### 3.2. 三大设计原则的细节实施 (00:11:32 - 00:30:43)

1.  **数据驱动和灵活性 (Data-Driven and Flexible)：**
    * 系统设计应易于添加新系统、调整现有系统。
    * **示例：** 能够灵活检查玩家的“人生道路”（流浪者、公司职员、街头小子），从而改变 NPC 消息和提问，实现叙事上的多样性。
2.  **易于访问和标准化 (Accessible and Standardized)：**
    * 确保新用户能够快速上手并使用工具。
    * 通过使用清晰的逻辑节点和预定义的结构（例如，用于探索序列的结构）来保持任务编辑器图表的清晰度和可读性。
3.  **高效和节省时间 (Efficient and Time-Saving)：**
    * 注重工作流的优化，即使是很小的改进也要尽早实施。
    * **量化效益：** 考虑到游戏中任务编辑器有约 **12 万** 个节点，场景编辑器有约 **20.5 万** 个片段，每个节点或片段节省 5 秒钟的差异，累积起来将节省巨大的开发时间。

### 3.3. “一招制敌”原则 (One Node to Rule Them All) (00:30:43 - 00:36:20)

* **原则内容：** 避免为每个变体功能创建单独的节点。一个通用函数/节点（如“Move”节点）应该能处理所有变体命令，并通过属性定制化（例如，处理所有 NPC 移动类型）。
* **优势：** 保持编辑器界面整洁；保证了功能的标准化实现；确保设计师能自动受益于程序员对系统的编码改进。

## 4. 经验教训与工具使用实例 (00:36:20 - 00:48:38)

### 4.1. 工具的局限性与教训 (00:36:20 - 00:43:32)

* **不理想之处：** 系统过于灵活，可能被用于创建过于复杂的、难以维护的逻辑设置（例如，一个场景的设置可能涉及大量条件检查）。
* **经验教训：**
    1.  仅有文档不足够。
    2.  必须为新员工提供更深入的实践培训，并建立技术审核（Tech Reviews）流程，以强制执行实施标准。

### 4.2. 复杂的工具应用示例 (00:43:32 - 00:48:38)

* **“金字塔之歌”（Pyramid Song）潜水任务 (00:43:32 - 00:45:00):**
    * 游戏中没有原生的 NPC 潜水功能。
    * 该任务的潜水部分是利用工具进行的一个“大黑科技”（big hack），主要由过场动画设计师利用现有工具的灵活性完成。
* **超梦（Braindance）调查 (00:45:00 - 00:47:00):**
    * 结合了叙事与调查。
    * 工具必须支持新的特定功能，包括：玩家倒带/快进、脱离演员身体以第三人称视角观察、以及感知不同的图层（音频/视觉）。
    * 团队通过制作简单的原型来快速验证概念并指导工具开发。
* **地铁系统 (00:47:00 - 00:48:38):**
    * 在《赛博朋克 2077：终极版》中引入的整个地铁系统（列车移动、乘客随机设置、玩家位置切换）都是通过任务和场景结构来处理和管理的。

## 5. 最终总结与开发建议 (00:48:38 - 00:51:47)

1.  **不要重复造轮子：** 重复利用现有的解决方案和功能，而非为每个新需求都编写新代码。
2.  **用户友好性优先：** 始终优先考虑工具的用户友好性，尤其是考虑到团队规模（接近一百人），并基于用户最常使用的功能进行优化。
3.  **创建并强制执行实施标准：** 随着团队规模的扩大，必须制定并严格执行实施标准，以保持代码和任务图表的清晰度和效率。
4.  **建立坚实的基础并持续迭代：** 确保功能易于扩展。工具的迭代和改进不能停止（团队一直迭代到终极版发布前三个月）。
5.  **“能做不等于应该做”：** 尽管工具提供了强大的灵活性，但要谨慎使用这种能力，避免创建过度复杂的解决方案。
6.  **培训员工：** 对于复杂的工具，完善的员工培训和招聘流程至关重要。

---
* **结尾 (00:51:47 - 00:52:58):** 感谢听众，进入问答环节，并提及 Project Orion 的招聘信息。